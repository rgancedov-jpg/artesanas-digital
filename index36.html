<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" /> 
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Panel de Administraci√≥n</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-app.js";
        import { getFirestore, collection, doc, getDoc, query, getDocs, orderBy, startAfter, limit, deleteDoc, updateDoc } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-firestore.js";
        
        // =================================================================================
        // CONFIGURACI√ìN DE FIREBASE
        // =================================================================================
        const firebaseConfig = {
            apiKey: "AIzaSyAVzAro7RdogHAkW1R8VTjVpNhi7cCSXZY", 
            authDomain: "artesanas-panama-digital.firebaseapp.com", 
            projectId: "artesanas-panama-digital", 
            storageBucket: "artesanas-panama-digital.firebasestorage.app", 
            messagingSenderId: "216158084302", 
            appId: "1:216158084302:web:e3c38b4a1a7234c7a8449f", 
            measurementId: "G-SQPMWH7G50" 
        };
        // =================================================================================
        
        // Inicializar Firebase
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const perfilesRef = collection(db, "perfiles");
        
        // Estado global para la navegaci√≥n y edici√≥n
        let lastVisible = null;
        let currentPage = 0;
        const PAGE_SIZE = 10;
        let allRecords = [];         
        let currentRecordIndex = -1;         
        let selectedDocId = null;         
        let currentRecordData = {};                 
        
        // Elementos del DOM
        const tableBody = document.getElementById('tableBody');
        const detailPanel = document.getElementById('detailPanel');
        const searchInput = document.getElementById('searchInput');
        const prevPageBtn = document.getElementById('prevPage');
        const nextPageBtn = document.getElementById('nextPage');
        const navPrevBtn = document.getElementById('navPrev');
        const navNextBtn = document.getElementById('navNext');
        const loadingIndicator = document.getElementById('loadingIndicator');
        const editButtons = document.getElementById('editButtons');         
        const cancelButton = document.getElementById('cancelButton');         
        const saveButton = document.getElementById('saveButton');                 
        
        // ======================== FUNCIONES DE UTILIDAD PARA LA B√öSQUEDA ========================

        /**
         * Normaliza un n√∫mero de tel√©fono eliminando todos los caracteres que no sean d√≠gitos.
         */
        function normalizePhone(phone) {
            if (!phone) return '';
            return phone.replace(/\D/g, ''); 
        }

        /**
         * Limpia una cadena de texto, eliminando acentos y convirti√©ndola a min√∫sculas.
         */
        function cleanString(str) {
            if (!str) return '';
            return str.normalize("NFD").replace(/[\u0300-\u036f]/g, "").toLowerCase();
        }

        // ======================== FUNCIONES DE EDICI√ìN Y GUARDADO ========================
        /**
         * Alterna el panel de detalle entre el modo de visualizaci√≥n y el modo de edici√≥n.
         */
        function toggleEditMode(isEditing) {
            document.querySelectorAll('.view-display').forEach(el => el.classList.toggle('hidden', isEditing));
            document.querySelectorAll('.edit-input').forEach(el => el.classList.toggle('hidden', !isEditing));
            document.getElementById('viewButtonsContainer').classList.toggle('hidden', isEditing);
            editButtons.classList.toggle('hidden', !isEditing);
            navPrevBtn.disabled = isEditing;
            navNextBtn.disabled = isEditing;
        }
        /**
         * Recopila los datos del formulario de edici√≥n y actualiza Firestore.
         */
        window.guardarModificacion = async function() {
            if (!selectedDocId) {
                alert("No hay un perfil seleccionado para guardar.");
                return;
            }
            if (!confirm("¬øEst√° seguro de guardar los cambios?")) {
                return;
            }
            loadingIndicator.classList.remove('hidden');
            try {
                // 1. Recolectar nuevos datos del formulario
                const newNombre = document.getElementById('editArtesana').value.trim();                 
                const newEmprendimiento = document.getElementById('editEmprendimiento').value.trim();                                
                const updatedData = {
                    nombre: newNombre,
                    nombreEmprendimiento: newEmprendimiento,
                    telefono: document.getElementById('editTelefono').value.trim(),
                    ubicacion: document.getElementById('editUbicacion').value.trim(),
                    instagram: document.getElementById('editInstagram').value.trim(),
                    descripcion: document.getElementById('editDescripcion').value.trim(),
                    updatedAt: new Date().toISOString(),
                                        
                    // Actualizar campos de indexaci√≥n para la b√∫squeda 
                    nombre_lower: newNombre.toLowerCase(),                     
                    nombreEmprendimiento_lower: newEmprendimiento.toLowerCase(),
                };
                // 2. Realizar la actualizaci√≥n en Firestore
                const docRef = doc(perfilesRef, selectedDocId);
                await updateDoc(docRef, updatedData);
                alert("‚úÖ ¬°Modificaci√≥n guardada exitosamente!");
                // 3. Recargar el registro actualizado
                const docSnap = await getDoc(docRef);
                selectRecord(selectedDocId, docSnap.data());                 
                // 4. Volver a Modo Vista y refrescar la tabla
                toggleEditMode(false);                 
                loadRecords('initial');             
            } catch (error) {
                console.error("Error al guardar la modificaci√≥n:", error);
                alert(`‚ùå Ocurri√≥ un error al guardar: ${error.message}`);
            } finally {
                loadingIndicator.classList.add('hidden');
            }
        };
        
        // ======================== FUNCIONES DE NAVEGACI√ìN Y CARGA ========================
        // La paginaci√≥n tradicional se mantiene sin cambios, ordenada por 'nombre'
        window.loadRecords = async function (direction = 'initial') {
            loadingIndicator.classList.remove('hidden');
            let q;
            try {
                // El orden se mantiene por 'nombre' (Artesana)
                if (direction === 'next' && lastVisible) {
                    q = query(perfilesRef, orderBy("nombre"), startAfter(lastVisible), limit(PAGE_SIZE));
                } else {
                    q = query(perfilesRef, orderBy("nombre"), limit(PAGE_SIZE));
                }
                
                const documentSnapshots = await getDocs(q);
                if (documentSnapshots.empty && direction !== 'initial') {
                    alert("No hay m√°s registros para mostrar.");
                    loadingIndicator.classList.add('hidden');
                    return;
                }
                tableBody.innerHTML = '';
                allRecords = [];
                
                documentSnapshots.forEach(doc => {
                    const data = doc.data();
                    data.docId = doc.id;                     
                    allRecords.push(doc.id);
                    
                    const row = tableBody.insertRow();
                    row.className = 'cursor-pointer hover:bg-violet-50 transition-colors';
                    // Al hacer clic, seleccionar el registro para mostrar detalle
                    row.onclick = () => { selectRecord(doc.id, doc.data()); toggleEditMode(false); };
                    
                    // *** ORDEN DE COLUMNAS ACTUALIZADO: Artesana, Emprendimiento, Tel√©fono, Ubicaci√≥n ***
                    row.insertCell().textContent = data.nombre || 'N/A';                    // 1. Artesana
                    row.insertCell().textContent = data.nombreEmprendimiento || 'Sin Nombre'; // 2. Emprendimiento
                    row.insertCell().textContent = data.telefono || 'N/A';                     // 3. Tel√©fono
                    row.insertCell().textContent = data.ubicacion || 'N/A';                    // 4. Ubicaci√≥n
                    
                    // Celda de Acciones con botones de Modificar y Borrar
                    const actionsCell = row.insertCell();
                    actionsCell.className = 'whitespace-nowrap';
                    
                    // Bot√≥n Modificar
                    const modifyBtn = document.createElement('button');
                    modifyBtn.textContent = '‚úèÔ∏è Modificar';
                    modifyBtn.className = 'bg-blue-600 hover:bg-blue-700 text-white font-bold py-1 px-3 rounded text-xs transition-colors';
                    modifyBtn.onclick = (e) => {
                        e.stopPropagation();                         
                        selectRecord(doc.id, doc.data());                         
                        toggleEditMode(true);                     
                    };
                    actionsCell.appendChild(modifyBtn);
                    
                    // Bot√≥n Borrar
                    const deleteBtn = document.createElement('button');
                    deleteBtn.textContent = 'üóëÔ∏è Borrar';
                    deleteBtn.className = 'bg-red-500 hover:bg-red-700 text-white font-bold py-1 px-3 rounded text-xs ml-2 transition-colors';
                    deleteBtn.onclick = (e) => {
                        e.stopPropagation();                         
                        borrarRegistro(doc.id);
                    };
                    actionsCell.appendChild(deleteBtn);
                });
                
                // Actualizar cursores para paginaci√≥n
                if (!documentSnapshots.empty) {
                    lastVisible = documentSnapshots.docs[documentSnapshots.docs.length - 1];
                    if (direction === 'next') currentPage++;
                    if (direction === 'prev' && currentPage > 0) currentPage--;
                    if (direction === 'initial') currentPage = 0;
                }
                document.getElementById('pageStatus').textContent = `P√°gina ${currentPage + 1}`;
                prevPageBtn.disabled = currentPage === 0;
                nextPageBtn.disabled = documentSnapshots.empty || documentSnapshots.size < PAGE_SIZE;
            } catch (error) {
                console.error("Error cargando registros:", error);
                alert("Ocurri√≥ un error al cargar la lista de perfiles.");
            } finally {
                loadingIndicator.classList.add('hidden');
            }
        };
        /**
         * Implementa la b√∫squeda flexible (incluye coincidencias parciales).
         */
        window.searchRecords = async function () {
            const searchTerm = searchInput.value.trim();
            if (!searchTerm) {
                loadRecords('initial'); 
                return;
            }
            loadingIndicator.classList.remove('hidden');
            try {
                // 1. Preparamos los t√©rminos de b√∫squeda:
                const cleanSearch = cleanString(searchTerm); // "Mar√≠a Artesana" -> "maria artesana"
                const phoneSearchDigits = normalizePhone(searchTerm); // "Maria 654" -> "654"
                
                // 2. Obtener TODOS los documentos (necesario para una b√∫squeda flexible de m√∫ltiples campos)
                let q = query(perfilesRef, orderBy("nombre")); 
                const querySnapshot = await getDocs(q);
                tableBody.innerHTML = '';
                allRecords = [];
                let matches = [];
                
                // 3. Filtrado en el lado del cliente (flexible)
                querySnapshot.forEach(doc => {
                    const data = doc.data();
                    
                    // Limpiamos los datos del documento para la comparaci√≥n:
                    const cleanNombre = cleanString(data.nombre);
                    const cleanEmprendimiento = cleanString(data.nombreEmprendimiento);
                    const normalizedTelefono = normalizePhone(data.telefono); // Siempre normalizado a d√≠gitos

                    // CRITERIO DE MATCH:
                    let match = false;
                    
                    // Criterio A: Coincidencia parcial en Nombre/Emprendimiento (con limpieza de acentos)
                    if (cleanNombre.includes(cleanSearch) || cleanEmprendimiento.includes(cleanSearch)) {
                        match = true;
                    }

                    // Criterio B: Coincidencia parcial de d√≠gitos en Tel√©fono (solo se eval√∫a si el t√©rmino tiene d√≠gitos)
                    // Se usa `!match` para evitar la sobreescritura, aunque un OR final tambi√©n funcionar√≠a.
                    if (!match && phoneSearchDigits.length > 0) { 
                        if (normalizedTelefono.includes(phoneSearchDigits)) {
                            match = true;
                        }
                    }

                    if (match) {
                        data.docId = doc.id;
                        matches.push(data);
                        allRecords.push(doc.id); 
                    }
                });
                
                if (matches.length === 0) {
                    const row = tableBody.insertRow();
                    row.insertCell(0).textContent = `No se encontraron resultados para "${searchTerm}".`;
                    row.cells[0].colSpan = 5; 
                    row.cells[0].className = 'text-center py-4';
                } else {
                    matches.forEach(data => {
                        const row = tableBody.insertRow();
                        row.className = 'cursor-pointer hover:bg-violet-50 transition-colors';
                        row.onclick = () => { selectRecord(data.docId, data); toggleEditMode(false); };
                        
                        // *** ORDEN DE COLUMNAS ACTUALIZADO: Artesana, Emprendimiento, Tel√©fono, Ubicaci√≥n ***
                        row.insertCell().textContent = data.nombre || 'N/A';                       // 1. Artesana
                        row.insertCell().textContent = data.nombreEmprendimiento || 'Sin Nombre';  // 2. Emprendimiento
                        row.insertCell().textContent = data.telefono || 'N/A';                     // 3. Tel√©fono
                        row.insertCell().textContent = data.ubicacion || 'N/A';                    // 4. Ubicaci√≥n
                        
                        const actionsCell = row.insertCell();
                        actionsCell.className = 'whitespace-nowrap';
                        
                        // Bot√≥n Modificar
                        const modifyBtn = document.createElement('button');
                        modifyBtn.textContent = '‚úèÔ∏è Modificar';
                        modifyBtn.className = 'bg-blue-600 hover:bg-blue-700 text-white font-bold py-1 px-3 rounded text-xs transition-colors';
                        modifyBtn.onclick = (e) => {
                            e.stopPropagation();
                            selectRecord(data.docId, data);
                            toggleEditMode(true);
                        };
                        actionsCell.appendChild(modifyBtn);
                        
                        // Bot√≥n Borrar
                        const deleteBtn = document.createElement('button');
                        deleteBtn.textContent = 'üóëÔ∏è Borrar';
                        deleteBtn.className = 'bg-red-500 hover:bg-red-700 text-white font-bold py-1 px-3 rounded text-xs ml-2 transition-colors';
                        deleteBtn.onclick = (e) => {
                            e.stopPropagation();
                            borrarRegistro(data.docId);
                        };
                        actionsCell.appendChild(deleteBtn);
                    });
                }
                
                document.getElementById('pageStatus').textContent = `Resultados (${matches.length})`;
                // Deshabilitar paginaci√≥n cuando se muestran resultados de b√∫squeda
                prevPageBtn.disabled = true;
                nextPageBtn.disabled = true;
            } catch (error) {
                console.error("Error en la b√∫squeda:", error);
                alert("Ocurri√≥ un error al realizar la b√∫squeda.");
            } finally {
                loadingIndicator.classList.add('hidden');
            }
        };
        /**
         * Carga el detalle del registro seleccionado y prepara los campos de edici√≥n.
         */
        function selectRecord(docId, data) {
            selectedDocId = docId;             
            currentRecordData = data;             
            currentRecordIndex = allRecords.findIndex(id => id === docId);                        
            
            // Resto de campos
            document.getElementById('displayEmprendimiento').textContent = data.nombreEmprendimiento || 'Sin Nombre';
            document.getElementById('editEmprendimiento').value = data.nombreEmprendimiento || '';
            document.getElementById('displayArtesana').textContent = data.nombre || 'N/A';
            document.getElementById('editArtesana').value = data.nombre || '';
            document.getElementById('displayTelefono').textContent = data.telefono || 'N/A';
            document.getElementById('editTelefono').value = data.telefono || '';
            document.getElementById('displayUbicacion').textContent = data.ubicacion || 'N/A';
            document.getElementById('editUbicacion').value = data.ubicacion || '';
            document.getElementById('displayInstagram').textContent = data.instagram || 'N/A';
            document.getElementById('editInstagram').value = data.instagram || '';
            document.getElementById('displayDescripcion').textContent = data.descripcion || 'Sin descripci√≥n';
            document.getElementById('editDescripcion').value = data.descripcion || '';
            document.getElementById('detailCreatedAt').textContent = data.createdAt ? new Date(data.createdAt).toLocaleDateString() : 'N/A';                        
            
            // URLs de archivos (solo visualizaci√≥n)
            document.getElementById('detailLogo').innerHTML = data.logoURL ? `<p class="text-xs text-gray-500 truncate">Logo URL: <a href="${data.logoURL}" target="_blank" class="text-blue-500 hover:underline">${data.logoURL.substring(0, 30)}...</a></p>` : 'Sin Logo Subido';
            
            const prod1 = data.productos?.[0];
            const prod2 = data.productos?.[1];
            
            document.getElementById('detailProd1').innerHTML = `
                <p><strong>Desc:</strong> ${prod1?.descripcion || 'N/A'}</p>
                <p class="text-xs text-gray-500 truncate">URL: ${prod1?.url ? `<a href="${prod1.url}" target="_blank" class="text-blue-500 hover:underline">${prod1.url.substring(0, 30)}...</a>` : 'N/A'}</p>
            `;
            document.getElementById('detailProd2').innerHTML = `
                <p><strong>Desc:</strong> ${prod2?.descripcion || 'N/A'}</p>
                <p class="text-xs text-gray-500 truncate">URL: ${prod2?.url ? `<a href="${prod2.url}" target="_blank" class="text-blue-500 hover:underline">${prod2.url.substring(0, 30)}...</a>` : 'N/A'}</p>
            `;
            
            detailPanel.classList.remove('hidden');
            updateNavigationButtons();
        }
        /**
         * Actualiza los botones de navegaci√≥n secuencial.
         */
        function updateNavigationButtons() {
            navPrevBtn.disabled = currentRecordIndex <= 0;
            navNextBtn.disabled = currentRecordIndex >= allRecords.length - 1;
        }
        
        window.navigateRecord = async function (offset) {
            if (editButtons.classList.contains('hidden') === false) {
                alert("Por favor, guarde o cancele la edici√≥n actual antes de navegar.");
                return;
            }
            const newIndex = currentRecordIndex + offset; 
            
            if (newIndex >= 0 && newIndex < allRecords.length) {
                const docId = allRecords[newIndex];
                const docSnap = await getDoc(doc(perfilesRef, docId));
                if (docSnap.exists()) {
                    selectRecord(docId, docSnap.data());
                    toggleEditMode(false);                 
                } else {
                    alert('Error: El registro no existe.');
                    loadRecords('initial');                 
                }
            }
        }
        
        async function borrarRegistro(docId) { 
             if (!confirm(`‚ö†Ô∏è ¬øEst√° seguro que desea BORRAR PERMANENTEMENTE el registro? Esta acci√≥n es irreversible.`)) {
                return;
            }
            try {
                await deleteDoc(doc(perfilesRef, docId));
                alert(`‚úÖ El registro ha sido borrado exitosamente.`); // Mensaje simplificado
                loadRecords('initial');
                detailPanel.classList.add('hidden');
            } catch (error) {
                console.error("Error al borrar el registro:", error);
                alert(`‚ùå Ocurri√≥ un error al intentar borrar el registro: ${error.message}`);
            }
        }
        
        // ======================== INICIALIZACI√ìN ========================
        window.onload = function() {
            loadRecords('initial');                         
            
            // Configurar botones de paginaci√≥n
            prevPageBtn.onclick = () => loadRecords('prev');
            nextPageBtn.onclick = () => loadRecords('next');
            // Configurar botones de navegaci√≥n secuencial
            navPrevBtn.onclick = () => navigateRecord(-1);
            navNextBtn.onclick = () => navigateRecord(1);
            
            // Configurar b√∫squeda
            document.getElementById('searchButton').onclick = searchRecords;
            // Configurar bot√≥n de RESETEO
            document.getElementById('clearSearchButton').onclick = () => {
                searchInput.value = ''; // Limpiar el campo de b√∫squeda
                loadRecords('initial'); // Recargar la lista inicial
            };
            // Permitir b√∫squeda al presionar ENTER en el input
            searchInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    searchRecords();
                }
            });
            
            // Configurar botones de edici√≥n y cancelaci√≥n
            saveButton.onclick = guardarModificacion;
            cancelButton.onclick = () => {
                selectRecord(selectedDocId, currentRecordData); // Restaura los datos originales en los campos de edici√≥n
                toggleEditMode(false);                             // Vuelve al modo de visualizaci√≥n
            };
        };
    </script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
        }
        .header {
            background-color: #4a148c; /* Violeta oscuro */
            color: white;
        }
        .main-container {
            min-height: calc(100vh - 80px); /* Ajuste para el header */
        }
        th, td {
            padding: 12px 16px;
            text-align: left;
        }
        th {
            background-color: #fef08a; /* Amarillo/Dorado */
            color: #4a148c;
            border-bottom: 2px solid #ddd;
        }
        .table-container {
            overflow-x: auto;
            min-width: 100%;
        }
        .detail-card {
            background-color: #fff;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        .detail-item {
            border-bottom: 1px solid #eee;
            padding: 10px 0;
        }
        .edit-input {
            margin-top: 5px;
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 4px;
            width: 100%;
            box-sizing: border-box;
        }
    </style>
</head>
<body class="p-0">
    <header class="header p-4 shadow-lg">
        <h1 class="text-3xl font-extrabold">üöÄ Panel de Gesti√≥n (Administraci√≥n)</h1>
        <p class="text-sm">Vista de tabla y detalles de Perfiles Digitales.</p>
    </header>
    <div class="main-container flex flex-col lg:flex-row p-6 gap-6">
        <div class="lg:w-2/3 w-full bg-white p-6 rounded-lg shadow-xl">
            <h2 class="text-xl font-bold text-gray-700 mb-4">Cat√°logo de Perfiles</h2>
            
            <div class="mb-6 border p-4 rounded-lg bg-gray-50">
                <label for="searchInput" class="font-semibold text-gray-700 mb-2 block">Buscar Perfil (Nombre, Emprendimiento o Tel√©fono)</label>
                <div class="flex gap-3 items-stretch">
                    <input type="text" id="searchInput" placeholder="Ej: Ana, Artesan√≠as, 6543-2109" class="p-3 border rounded-lg flex-grow" />
                    <button id="searchButton" class="bg-violet-600 hover:bg-violet-700 text-white font-bold py-3 px-6 rounded-lg transition-colors whitespace-nowrap">
                        üîç Buscar
                    </button>
                    <button id="clearSearchButton" class="bg-gray-500 hover:bg-gray-600 text-white font-bold py-3 px-6 rounded-lg transition-colors whitespace-nowrap">
                        üîÑ Mostrar Todos / Resetear Filtro
                    </button>
                    </div>
                <p class="text-xs text-gray-500 mt-2">*B√∫squeda **flexible** por nombre de la artesana, nombre del emprendimiento (ignora acentos/may√∫sculas) o cualquier secuencia de d√≠gitos del tel√©fono.</p>
            </div>
            
            <div class="table-container">
                <table class="w-full border-collapse rounded-lg overflow-hidden">
                    <thead>
                        <tr>
                            <th>Artesana</th>          <th>Emprendimiento</th>    <th>Tel√©fono</th>          <th>Ubicaci√≥n</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody id="tableBody">
                        <tr><td colspan="5" class="text-center py-4 text-gray-500">Cargando datos...</td></tr>
                    </tbody>
                </table>
            </div>
            
            <div class="flex justify-between items-center mt-6">
                <button id="prevPage" class="bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-l-lg" disabled>
                    P√°gina Anterior
                </button>
                <span id="pageStatus" class="text-gray-600 font-medium">P√°gina 1</span>
                <button id="nextPage" class="bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-r-lg" disabled>
                    P√°gina Siguiente
                </button>
            </div>
            
            <div id="loadingIndicator" class="hidden text-center mt-4 text-violet-600 font-semibold">
                Cargando...
            </div>
        </div>
        
        <div id="detailPanel" class="lg:w-1/3 w-full detail-card p-6 rounded-lg shadow-xl hidden">
            <div class="flex justify-between items-center mb-4 border-b pb-2">
                <h2 class="text-xl font-bold text-violet-800">Detalle del Perfil</h2>
                </div>
            
            <div class="flex justify-between items-center mb-6">
                <button id="navPrev" class="bg-gray-200 hover:bg-gray-300 text-gray-800 py-1 px-3 rounded transition-colors text-sm" disabled>
                    &larr; Anterior
                </button>
                
                <div id="viewButtonsContainer">
                </div>
                
                <div id="editButtons" class="flex gap-2 hidden">
                    <button id="saveButton" class="bg-green-600 hover:bg-green-700 text-white font-bold py-1 px-3 rounded transition-colors text-sm">
                        üíæ Guardar Cambios
                    </button>
                    <button id="cancelButton" class="bg-gray-500 hover:bg-gray-600 text-white py-1 px-3 rounded transition-colors text-sm">
                        ‚ùå Cancelar
                    </button>
                </div>
                
                <button id="navNext" class="bg-gray-200 hover:bg-gray-300 text-gray-800 py-1 px-3 rounded transition-colors text-sm" disabled>
                    Siguiente &rarr;
                </button>
            </div>
            
            <div class="space-y-3">
                <div class="detail-item">
                    <p class="font-semibold text-gray-700">Emprendimiento:</p>
                    <p id="displayEmprendimiento" class="text-gray-900 view-display"></p>
                    <input type="text" id="editEmprendimiento" class="edit-input hidden" placeholder="Nombre del Emprendimiento" />
                </div>
                <div class="detail-item">
                    <p class="font-semibold text-gray-700">Artesana:</p> 
                    <p id="displayArtesana" class="text-gray-900 view-display"></p>
                    <input type="text" id="editArtesana" class="edit-input hidden" placeholder="Nombre de la Artesana" /> 
                </div>
                <div class="detail-item">
                    <p class="font-semibold text-gray-700">Tel√©fono:</p>
                    <p id="displayTelefono" class="text-gray-900 view-display"></p>
                    <input type="tel" id="editTelefono" class="edit-input hidden" placeholder="9999-9999" />
                </div>
                <div class="detail-item">
                    <p class="font-semibold text-gray-700">Ubicaci√≥n:</p>
                    <p id="displayUbicacion" class="text-gray-900 view-display"></p>
                    <input type="text" id="editUbicacion" class="edit-input hidden" placeholder="Provincia, Ciudad" />
                </div>
                <div class="detail-item">
                    <p class="font-semibold text-gray-700">Instagram:</p>
                    <p id="displayInstagram" class="text-gray-900 view-display"></p>
                    <input type="text" id="editInstagram" class="edit-input hidden" placeholder="@usuario" />
                </div>
                <div class="detail-item">
                    <p class="font-semibold text-gray-700">Descripci√≥n:</p>
                    <p id="displayDescripcion" class="text-gray-900 text-sm italic view-display"></p>
                    <textarea id="editDescripcion" class="edit-input hidden" rows="3" placeholder="Descripci√≥n breve del emprendimiento"></textarea>
                </div>
                <div class="detail-item">
                    <p class="font-semibold text-gray-700">Creado:</p>
                    <p id="detailCreatedAt" class="text-gray-500 text-sm"></p>
                </div>
                
                <h3 class="text-md font-bold text-gray-700 pt-3">Archivos Subidos (URLs)</h3>
                <p class="text-xs text-red-500 font-semibold">La modificaci√≥n de im√°genes solo es posible en el formulario principal (index.html).</p>
                <div class="detail-item" id="detailLogo">
                </div>
                <div class="grid grid-cols-2 gap-4">
                    <div class="detail-item border-none" id="detailProd1">
                        <p class="font-semibold text-gray-700">Producto 1:</p>
                    </div>
                    <div class="detail-item border-none" id="detailProd2">
                        <p class="font-semibold text-gray-700">Producto 2:</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>
