<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Documentaci贸n Consolidada - Perfiles Digitales (v2)</title>
<!-- Carga de Tailwind CSS -->
<script src="https://cdn.tailwindcss.com"></script>
<!-- Tu funci贸n personalizada (en bloque aparte) -->
<script>
  // ========================================================================
  // FUNCIN DE REDIRECCIN A INICIO.HTML (misma ventana)
  // ========================================================================
  window.regresarAlMenuPrincipal = function() {
    window.location.href = 'index.html';
  };
  // ========================================================================
</script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
            color: #1f2937;
        }
        .container {
            max-width: 1000px;
            margin: 40px auto;
            padding: 30px;
            background-color: #ffffff;
            border-radius: 12px;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        h1 {
            color: #4a148c; /* Violeta Oscuro */
            font-size: 2.25rem;
            font-weight: 800;
            margin-bottom: 1rem;
            border-bottom: 3px solid #fcd34d; /* Dorado */
            padding-bottom: 0.5rem;
        }
        h2 {
            color: #5b21b6; /* Violeta */
            font-size: 1.75rem;
            font-weight: 700;
            margin-top: 1.5rem;
            margin-bottom: 1rem;
        }
        h3 {
            color: #7c3aed; /* Violeta Medio */
            font-size: 1.25rem;
            font-weight: 600;
            margin-top: 1rem;
            margin-bottom: 0.5rem;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 1.5rem;
            box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);
            border-radius: 6px;
            overflow: hidden;
        }
        th, td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #e5e7eb;
        }
        th {
            background-color: #fef08a; /* Amarillo/Dorado */
            color: #4a148c;
            font-weight: 700;
        }
        tr:nth-child(even) {
            background-color: #f9fafb;
        }
        ul {
            list-style-type: disc;
            margin-left: 20px;
            padding-left: 10px;
            margin-bottom: 1rem;
        }
        .tag {
            background-color: #e0f2f1;
            color: #0d9488;
            padding: 2px 8px;
            border-radius: 4px;
            font-weight: 600;
            font-size: 0.875rem;
        }
    </style>
</head>
<body>
<div class="container">
        <div class="flex justify-between items-center mb-6">
            <h1>Documentaci贸n Consolidada de la Aplicaci贸n (v2)</h1>
            <button onclick="regresarAlMenuPrincipal()" 
                    class="bg-[#ff9900] hover:bg-[#cc7a00] text-white font-bold py-2 px-4 rounded-lg transition-colors whitespace-nowrap text-sm shadow-md">
                Regresar al Men煤 Principal
            </button>
        </div>
        <h3>1. Botones (CRUD y Utilidades)</h3>
        <table>
            <thead>
                <tr>
                    <th>Bot贸n</th>
                    <th>Acci贸n Principal</th>
                    <th>Detalle y Objetivo</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Buscar </td>
                    <td>Lectura (Read)</td>
                    <td>Permite cargar el perfil mediante <strong>b煤squeda total o parcial</strong> por Nombre de la Emprendedora, Nombre del Emprendimiento o Tel茅fono.</td>
                </tr>
                <tr>
                    <td>Guardar en BD</td>
                    <td>Creaci贸n/Actualizaci贸n (Create/Update)</td>
                    <td>Persiste los datos en Firestore y las im谩genes en Cloudinary. Activa la generaci贸n autom谩tica del C贸digo Amigable si el perfil es nuevo.</td>
                </tr>
                <tr>
                    <td>Borrar Registro</td>
                    <td>Eliminaci贸n (Delete)</td>
                    <td>Borra permanentemente el registro de la base de datos y elimina las im谩genes asociadas.</td>
                </tr>
                <tr>
                    <td>Generar QR</td>
                    <td>Herramienta</td>
                    <td>Muestra el C贸digo QR interactivo, con opciones para incluir solo el link de Instagram o todos los datos del perfil.</td>
                </tr>
                <tr>
                    <td>Descargar PDF</td>
                    <td>Herramienta</td>
                    <td>Genera un PDF listo para imprimir que incluye todos los datos del perfil, las im谩genes y el C贸digo QR.</td>
                </tr>
                <tr>
                    <td>Limpiar Filtro </td>
                    <td>Herramienta</td>
                    <td>Restablece el formulario a un estado vac铆o o limpia completamente los resultados de b煤squeda, <strong>ejecut谩ndose instant谩neamente sin confirmaci贸n</strong>.</td>
                </tr>
            </tbody>
        </table>

        <h3>2. Mejoras Adicionales del Formulario</h3>
        <ul>
            <li>Implementaci贸n de un algoritmo de **b煤squeda flexible** que ignora may煤sculas/min煤sculas y acentos, y realiza coincidencia de subcadenas en los campos clave (Nombre, Emprendimiento, Tel茅fono).</li>
            <li>Reorganizaci贸n del formulario para seguir el orden de captura solicitado (Artesana, Emprendimiento, Tel茅fono, Ubicaci贸n, Logo, Descripci贸n, Instagram).</li>
            <li>Mejora de Dise帽o en PDF: El logo del emprendimiento se muestra ahora m谩s grande y en una posici贸n m谩s alta, optimizando la visibilidad.</li>
            <li>Previsualizaci贸n de Archivos: Las im谩genes (logo y productos) se previsualizan instant谩neamente despu茅s de ser seleccionadas, mejorando la experiencia del usuario antes de subir a Cloudinary.</li>
        </ul>

        <h3>3.  Almacenamiento de im谩genes con Cloudinary</h3>
        <p>El formulario en `inicio.html` est谩 configurado para que todas las im谩genes (logo y productos) se guarden en Cloudinary, no en Firebase Storage.</p>
        <p class="font-semibold">Configuraci贸n necesaria en Cloudinary:</p>
        <ul>
            <li><span class="tag">Cloud Name: djvnsgfcl</span></li>
            <li><span class="tag">Upload Preset: perfil_artesana</span> (debe estar configurado como unsigned).</li>
        </ul>
        <p class="font-semibold">Funcionamiento:</p>
        <ul>
            <li>Al subir un archivo, la funci贸n <span class="tag">uploadFileToCloudinary(file)</span> env铆a la imagen a Cloudinary.</li>
            <li>Cloudinary responde con la URL p煤blica segura (<span class="tag">secure_url</span>).</li>
            <li>Esa URL se guarda en Firestore dentro del documento del perfil.</li>
        </ul>
        <p class="mt-4 font-semibold text-green-600"> Con esto, la aplicaci贸n funciona con Firestore para datos y Cloudinary para im谩genes.</p>

        <hr class="my-6 border-t border-gray-300">

        <h2>II. Novedades del Panel de Administraci贸n (`administracion.html`)</h2>
        <p class="font-semibold text-gray-700">El archivo de administraci贸n incluye nuevas funcionalidades enfocadas en la gesti贸n de la tabla, edici贸n y reportes masivos.</p>

        <h3>1. Generaci贸n de Reportes Masivos</h3>
        <table>
            <thead>
                <tr>
                    <th>Bot贸n</th>
                    <th>Acci贸n Principal</th>
                    <th>Detalle y Objetivo</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>Descargar/Imprimir PDF Masivo</strong></td>
                    <td>Generaci贸n PDF</td>
                    <td>Genera un archivo PDF de m煤ltiples p谩ginas (una por perfil) con un <strong>dise帽o optimizado para impresi贸n</strong>. Obtiene <span class="tag">todos los registros</span> de la BD.</td>
                </tr>
                <tr>
                    <td><strong> Exportar a XLSX</strong></td>
                    <td>Exportaci贸n</td>
                    <td>Exporta todos los campos de todos los registros a una hoja de c谩lculo. La descarga incluye <span class="tag">toda la base de datos</span>, ignorando cualquier filtro de la tabla.</td>
                </tr>
                <tr>
                    <td><strong> Ver Reporte de Datos (Tabla Completa)</strong></td>
                    <td>Reporte Web (Nuevo)</td>
                    <td>Abre una nueva pesta帽a con <span class="tag">reporte_bd_emprendedoras.html</span>. Muestra la tabla completa en tiempo real, con contenido truncado a 50 caracteres para facilitar la impresi贸n.</td>
                </tr>
            </tbody>
        </table>

        <h3>2. Estructura y Estilo del Reporte Web (`reporte_bd_emprendedoras.html`)</h3>
        <ul>
            <li><strong>Dise帽o de Impresi贸n:</strong> Incluye un bot贸n para <span class="tag">window.print()</span> que permite guardar el reporte como PDF o imprimirlo.</li>
            <li><strong>Optimizaci贸n de Columnas:</strong> Columnas clave (Ubicaci贸n, Descripci贸n, Productos) tienen su contenido **truncado a 50 caracteres** para que la tabla quepa en una impresi贸n horizontal.</li>
            <li><strong>Carga en Tiempo Real:</strong> El reporte carga los datos directamente de Firebase en tiempo real, asegurando que la tabla mostrada est茅 siempre actualizada.</li>
        </ul>

        <h3>3. Ajustes de Dise帽o y Navegaci贸n en `administracion.html`</h3>
        <ul>
            <li><strong>Paginaci贸n Mejorada:</strong> Uso de paginaci贸n real (<span class="tag">limit &amp; startAfter</span>) para manejar grandes bases de datos.</li>
            <li><strong>Bot贸n Renombrado:</strong> El enlace al reporte web ahora es <strong>" Ver Reporte de Datos (Tabla Completa)"</strong> para ser m谩s expl铆cito.</li>
            <li><strong>L贸gica de Edici贸n:</strong> Al hacer clic en "锔 Modificar" o activar la edici贸n, los botones de navegaci贸n (Anterior/Siguiente) se **desactivan** para evitar la p茅rdida de cambios.</li>
            <li><strong>Actualizaci贸n Post-Guardado:</strong> Despu茅s de usar " Guardar Cambios", el panel de detalle recarga el registro actualizado y la tabla principal se refresca autom谩ticamente.</li>
        </ul>
    </div>
</body>
</html>